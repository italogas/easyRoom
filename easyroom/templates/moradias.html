<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
  <head>
    <meta charset="UTF-8">
    <title>EasyRoom | Dashboard</title>

		<base href="../" target="_blank">
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- Bootstrap 3.3.2 -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link href="dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />

			<link rel="stylesheet" href="css/style2.css" />
		
	
    <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
          page. However, you can choose any other skin. Make sure you
          apply the skin class to the body tag so the changes take effect.
    -->
    <link href="dist/css/skins/skin-blue.min.css" rel="stylesheet" type="text/css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <!--
  BODY TAG OPTIONS:
  =================
  Apply one or more of the following classes to get the 
  desired effect
  |---------------------------------------------------------|
  | SKINS         | skin-blue                               |
  |               | skin-black                              |
  |               | skin-purple                             |
  |               | skin-yellow                             |
  |               | skin-red                                |
  |               | skin-green                              |
  |---------------------------------------------------------|
  |LAYOUT OPTIONS | fixed                                   |
  |               | layout-boxed                            |
  |               | layout-top-nav                          |
  |               | sidebar-collapse                        |  
  |---------------------------------------------------------|
  
  -->
  <body class="skin-blue">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a href="/home" class="logo"><b>EasyRoom</b></a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>
          <!-- Navbar Right Menu -->
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <!-- Messages: style can be found in dropdown.less-->
              <li class="dropdown messages-menu">
                <!-- Menu toggle button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-envelope-o"></i>
                  <span class="label label-success">4</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 4 messages</li>
                  <li>
                    <!-- inner menu: contains the messages -->
                    <ul class="menu">
                      <li><!-- start message -->
                        <a href="#">
                          <div class="pull-left">
                            <!-- User Image -->
                            <img src="images/avatar.png" class="img-circle" alt="User Image"/>
                          </div>
                          <!-- Message title and timestamp -->
                          <h4>                            
                            Support Team
                            <small><i class="fa fa-clock-o"></i> 5 mins</small>
                          </h4>
                          <!-- The message -->
                          <p>Why not buy a new awesome theme?</p>
                        </a>
                      </li><!-- end message -->                      
                    </ul><!-- /.menu -->
                  </li>
                  <li class="footer"><a href="#">See All Messages</a></li>
                </ul>
              </li><!-- /.messages-menu -->

              <!-- Notifications Menu -->
              <li class="dropdown notifications-menu">
                <!-- Menu toggle button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-bell-o"></i>
                  <span class="label label-warning">10</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 10 notifications</li>
                  <li>
                    <!-- Inner Menu: contains the notifications -->
                    <ul class="menu">
                      <li><!-- start notification -->
                        <a href="#">
                          <i class="fa fa-users text-aqua"></i> 5 new members joined today
                        </a>
                      </li><!-- end notification -->                      
                    </ul>
                  </li>
                  <li class="footer"><a href="#">View all</a></li>
                </ul>
              </li>
              <!-- Tasks Menu -->
              <li class="dropdown tasks-menu">
                <!-- Menu Toggle Button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-flag-o"></i>
                  <span class="label label-danger">9</span>
                </a>
                <ul class="dropdown-menu">
                  <li class="header">You have 9 tasks</li>
                  <li>
                    <!-- Inner menu: contains the tasks -->
                    <ul class="menu">
                      <li><!-- Task item -->
                        <a href="#">
                          <!-- Task title and progress text -->
                          <h3>
                            Design some buttons
                            <small class="pull-right">20%</small>
                          </h3>
                          <!-- The progress bar -->
                          <div class="progress xs">
                            <!-- Change the css width attribute to simulate progress -->
                            <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                              <span class="sr-only">20% Complete</span>
                            </div>
                          </div>
                        </a>
                      </li><!-- end task item -->                      
                    </ul>
                  </li>
                  <li class="footer">
                    <a href="#">View all tasks</a>
                  </li>
                </ul>
              </li>
              <!-- User Account Menu -->
              <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <!-- The user image in the navbar-->
                  <img id="imgavatar1" src="images/avatar.png" class="user-image" alt="User Image"/>
                  <!-- hidden-xs hides the username on small devices so only the image appears. -->
                  <span id="username1" class="hidden-xs"></span>
                </a>
                <ul class="dropdown-menu">
                  <!-- The user image in the menu -->
                  <li class="user-header">
                    <img id="imgavatar2" src="images/avatar.png" class="img-circle" alt="User Image" />
                    <p id="username2">
                      
                    </p>
                  </li>
                  <!-- Menu Body -->
                  <li class="user-body">
                    <div class="col-xs-4 text-center">
                      <a href="#">Amigos</a>
                    </div>
                    <div class="col-xs-4 text-center">
                      <a href="#">Moradias</a>
                    </div>
                    <div class="col-xs-4 text-center">
                      <a href="#">Solicitações</a>
                    </div>
                  </li>
                  <!-- Menu Footer-->
                  <li class="user-footer">
                    <div class="pull-left">
                      <a href="#" class="btn btn-default btn-flat">Perfil</a>
                    </div>
                    <div class="pull-right">
                      <a href="javascript:signOut();" class="btn btn-default btn-flat">Sair</a>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar user panel (optional) -->
          <div class="user-panel">
            <div class="pull-left image">
              <img id="imgavatar3" src="images/avatar.png" class="img-circle" alt="User Image" />
            </div>
            <div class="pull-left info">
              <p id="username3"></p>
              <!-- Status -->
              <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
            </div>
          </div>

          <!-- search form (Optional) -->
          <form action="#" method="get" class="sidebar-form">
            <div class="input-group">
              <input type="text" name="q" class="form-control" placeholder="Search..."/>
              <span class="input-group-btn">
                <button type='submit' name='search' id='search-btn' class="btn btn-flat"><i class="fa fa-search"></i></button>
              </span>
            </div>
          </form>
          <!-- /.search form -->

          <!-- Sidebar Menu -->
          <ul class="sidebar-menu">
           <!-- <li class="header">HEADER</li> -->
            <!-- Optionally, you can add icons to the links -->
            <li  ><a href="/home" target="_self" >
	<i class="fa fa-laptop"></i><span>Início</span></a></li>
            <li><a href="/home" target="_self" >
	<i class="fa fa-book"></i><span>Buscar Vaga</span></a></li>
            <li><a href="/addmoradia" target="_self" >
	<i class="fa fa-edit"></i><span>Adicionar Moradia</span></a></li> 
            <li class="active"><a href="/moradias" target="_self" >
		 <i class="fa fa-th"></i><span>Minhas Moradias</span></a></li>
            <li><a href="/home" target="_self" >
	<i class="fa fa-book"></i><span>Buscar Moradias</span></a></li>
        <!--    <li class="treeview">
              <a href="#"><span>Moradias</span> <i class="fa fa-angle-left pull-right"></i></a>
              <ul class="treeview-menu">
                <li ><a href="#">Adicionar Moradia</a></li>
                <li><a href="#">Minhas Moradias</a></li>
                <li><a href="#">Buscar Moradias</a></li>
              </ul>
            </li> -->
            <li><a href="javascript:signOut();">
	<i class="fa fa-share"></i><span>Sair</span></a></li>
          </ul><!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
<section id="one" style="height: 100%;">
	
					<div style="margin-left: 20px;">	
			
					<header class="major">
						
							<h2>Easy Room</h2>
						</header>
						



  <body>

          <div class="box box-primary" style="width: 95%;">
			  	  <div class="box-header">
                  <div>Aplicativo web para procurar vagas em apartamento, onde um usuário ou dono do local (casa, apartamento, república, kitnet, pensionato), tem uma vaga pra alugar e insere no sistema, através da api do google maps o usuário pode ver os apts disponíveis na cidade. A idéia é também funcionar como uma pequena rede social, pra ver o apt/num em que seus amigos moram, e criar uma interação entre moradores de um mesmo prédio, ou de prédios vizinhos.</div>
  
    
                </div>
                </div>
                
          <div class="box box-primary" style="width: 95%;">
                <div class="box-header">

	<fieldset style="width: 88%;">

	

	<form action="">
		<legend>Minhas Moradias</legend>

<div id="panelmoradias">
  <table id="table-moradias"class="table table-striped">

  </table>
</div>

</form>



 </fieldset>	


                    </div>
                  </div><!-- /.box-body -->

<p><p>
 
</div>
<!--  <div id="map-canvas"></div> 
    <input id="pac-input" class="controls" type="text" placeholder="Busque um endereço">  -->

	<div id="panel2" style="display: none; margin-left:40px;" >


<!-- <a href="#" id="buttonvoltar" target="_self"  class="button">Voltar</a> -->

<!--      <input onclick="updateDados();" class="button" type=button value="Atualizar dados">-->
<p>


  </body>

 
<ul class="actions" >




    <meta name="google-signin-client_id" content="1078904266635-psl4d553svperv392ivr1dlr7dph6r7q.apps.googleusercontent.com" />
<script src="https://apis.google.com/js/platform.js" async defer></script>
    <script type="text/javascript">

        var saySomething = function() {
            window.alert("Welcome to EasyRoom!");
        };
        //gapi.auth2.init().fecth_basic_profile = true;
        var onSignIn = function (googleUser) {
            var profile = googleUser.getBasicProfile();
	          iduser = profile.getId();
            console.log('ID: ' + profile.getId());
            console.log('Name: ' + profile.getName());
            console.log('Image URL: ' + profile.getImageUrl());
            console.log('Email: ' + profile.getEmail());
      
    
	    document.getElementById("username1").innerHTML = profile.getName(); 
	    document.getElementById("username2").innerHTML = profile.getName() + "<small>"+ profile.getEmail() +"</small>"; 
	    document.getElementById("username3").innerHTML = profile.getName(); 

	if (profile.getImageUrl() ==  undefined){
	    document.getElementById('imgavatar1').setAttribute('src', "images/avatar2.jpg");
	    document.getElementById('imgavatar2').setAttribute('src', "images/avatar2.jpg");
	    document.getElementById('imgavatar3').setAttribute('src', "images/avatar2.jpg");} 
	else {
		document.getElementById('imgavatar1').setAttribute('src', profile.getImageUrl());
		document.getElementById('imgavatar2').setAttribute('src', profile.getImageUrl());
		document.getElementById('imgavatar3').setAttribute('src', profile.getImageUrl());}
//	document.getElementById("panel").style.display = "block"

        document.getElementById("panel2").style.display = "block";

        //document.getElementById("pac-input").style.display = "block";


  var xmlHttp = null;

  xmlHttp = new XMLHttpRequest();

var req= "/getmoradia/"+profile.getId();
xmlHttp.open("GET",req, false);
xmlHttp.send( null );
var x = decodeURI(xmlHttp.responseText);
drawTable(x);
//text = x;
//console.log(text.substring(1));
//document.getElementById("panelmoradias").innerHTML = text;


  var xmlHttp = null;

        xmlHttp = new XMLHttpRequest();
 
        xmlHttp.open("GET","/updateuser/"+profile.getId()+"/"+profile.getName()+"/"+profile.getEmail(),false);

    xmlHttp.send( null );
            
  };
    </script>
</head>
<!--<body style="background-color: lightgrey">
    <div style="background-color: lightsteelblue">
        <h1 style="color: dodgerblue; text-align: center">Welcome to EasyRoom!</h1> 
    </div> -->
    <div align="center" style="display: none;" class="g-signin2" data-onsuccess="onSignIn"></div>
     <div align="center">
       <!-- <input type="button" onclick="myInfo()" value="My Info"
               style="align-self: center; width: 80px; height: 40px"/> -->
    </div> 
</body>
<br><br>
 
<!--
			<li><a href="#" id="buttonvagas" style="display: none" class="button">Buscar Vagas</a></li>

<li><a href="#" id="buttonmeuapt" style="display: none" class="button">Meu predio</a></li>
<li><a href="#" id="buttonamigos" style="display: none" class="button">Buscar Amigos</a></li>
-->

		<!--	<li><a href="#" id="buttonsair" style="display: none" class="button" onclick="signOut();">Sign out</a></li>  -->
<script>
  
  function drawTable(data) {
    console.log(data);
    var array = [];
    array = JSON.parse(data);
    
    
    var tam = array.moradias.length;
    for (var i = 0; i < tam; i++) {
        drawRow(array.moradias[i]);
    }
  }

  function drawRow(rowData) {
    var row = $("<tr />").attr('id',rowData.id);
     //this will append tr element to table... keep its reference for a while since we will add cels into it
    $("#table-moradias").append(row);
    var nome = rowData.nome==='undefined' || rowData.nome===null ? "Vazio" : rowData.nome;
    row.append($("<td>" + nome + "</td>"));
    row.append($("<td>" + rowData.address + "</td>"));
    var linkAdd = "<a  id='addVaga' class='button' onclick='addVaga("+ rowData.id+ ")' >Add Vaga</a>";
    row.append($("<td>" + linkAdd + "</td>"));
  }

  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
    });
 
document.getElementById('imgavatar1').setAttribute('src',"images/avatar.png");
		document.getElementById('imgavatar2').setAttribute('src',"images/avatar.png");
		document.getElementById('imgavatar3').setAttribute('src',"images/avatar.png");
//	document.getElementById("panel").style.display = "none"

        document.getElementById("panel2").style.display = "none";

        //document.getElementById("pac-input").style.display = "none";
        window.location.href = "#";
  }
  

salvarVaga = function salvarVaga(id){

var price = document.getElementById('box-reco').value;
var tel = document.getElementById('box-fone').value;
var descr = document.getElementById('box-desc').value;

var req= "/addvaga/"+id+"/"+price+"/"+tel+"/"+descr;


 document.getElementById("div_vagas").remove();


  var xmlHttp = null;

        xmlHttp = new XMLHttpRequest();




xmlHttp.open("GET",req, false);
xmlHttp.send( null );
window.alert(xmlHttp.responseText);

}

cancelarVaga = function cancelarVaga(){

var price = document.getElementById('box-reco').value;
var tel = document.getElementById('box-fone').value;
var descr = document.getElementById('box-desc').value;
document.getElementById("div_vagas").remove();



}




addVaga = function addVaga(id) {
    var x=document.getElementById(id).cells
   var y = (x[2].innerHTML)
//window.alert(id)
    x[2].innerHTML = y+"<div id=\"div_vagas\">Informações da Vaga: <p><p>    <div>Preço: </div><input id=\"box-reco\" type=\"text\" pattern=\"^\d+(\.|\,)\d{2}$\" placeholder=\"Preço\">     <div>Telefone pra contato: </div><input id=\"box-fone\" type=\"text\" placeholder=\"Telefone\"> <p></p>  Descrição: <input id=\"box-desc\" style=\"  height: 80px\" type=\"text\" placeholder=\"Detalhes &#10; da vaga\">  <p></p>   <input onclick=\"salvarVaga('" + id+"');\" type=button value=\"Salvar Vaga\"><input onclick=\"cancelarVaga();\" type=button value=\"Cancelar\"></div>"
}


 
</script>


</div>						</ul>



	  </div><!-- /.content-wrapper -->

      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
          Anything you want
        </div>
        <!-- Default to the left --> 
        <strong>Copyright &copy; 2015 <a href="#">Company</a>.</strong> All rights reserved.
      </footer>

    </div><!-- ./wrapper -->

    <!-- REQUIRED JS SCRIPTS -->
    
    <!-- jQuery 2.1.3 -->
	<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>

    <!-- <script src="plugins/jQuery/jQuery-2.1.3.min.js"></script> -->
    <!-- Bootstrap 3.3.2 JS -->
    <script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <!-- AdminLTE App -->
    <script src="dist/js/app.min.js" type="text/javascript"></script>
    
    <!-- Optionally, you can add Slimscroll and FastClick plugins. 
          Both of these plugins are recommended to enhance the 
          user experience -->
  </body>
</html>